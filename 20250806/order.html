<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>TixGo – 訂票頁面</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap 5 CSS & Icons CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- 訂票頁專用樣式 -->
    <link rel="stylesheet" href="css/order.css" />
    <!-- 共用樣式 (header/footer 保持一致) -->
    <link rel="stylesheet" href="css/index.css" />
  </head>
  <body>
    <!-- ===== Header ===== -->
    <header class="tixgo-header">
      <div class="header-container">
        <div class="header-logo">
          <span class="dot"></span>
          TixGo
        </div>
        <div class="header-right">
          <nav class="nav-links">
            <a href="index.html">首頁</a>
            <a href="goods.html">商品列表</a>
          </nav>
          <div class="header-icons">
            <span title="會員中心"><i class="bi bi-person"></i></span>
            <span title="購物車"><i class="bi bi-cart3"></i></span>
          </div>
          <form class="header-search" role="search">
            <input type="text" placeholder="Search in site" />
            <button type="submit"><i class="bi bi-search"></i></button>
          </form>
        </div>
      </div>
    </header>

    <!-- ===== 主內容 ===== -->
    <main class="container-xxl order-page py-4 py-lg-5 flex-grow-1">
      <div class="row g-5 align-items-stretch">
        <!-- 左半：選座位 -->
        <section
          class="col-lg-6 d-flex justify-content-center align-items-center"
        >
          <div class="w-100">
            <h2 class="order-step mb-4">1. 選擇座位</h2>
            <div class="seat-map mx-auto shadow-lg rounded-4">
              <div class="stage mb-3">舞台</div>
              <!-- A 區 -->
              <div class="zone mb-2" data-zone="A">
                <button class="seat" data-seat="A1">A1</button>
                <button class="seat" data-seat="A2">A2</button>
                <button class="seat" data-seat="A3">A3</button>
              </div>
              <!-- B 區 -->
              <div class="zone mb-2" data-zone="B">
                <button class="seat" data-seat="B1">B1</button>
                <button class="seat" data-seat="B2">B2</button>
                <button class="seat" data-seat="B3">B3</button>
              </div>
              <!-- C 區 -->
              <div class="zone" data-zone="C">
                <button class="seat" data-seat="C1">C1</button>
                <button class="seat" data-seat="C2">C2</button>
                <button class="seat" data-seat="C3">C3</button>
                <button class="seat" data-seat="C4">C4</button>
              </div>
            </div>
          </div>
        </section>

        <!-- 右半：場次/票價/加入訂單（透明背景卡片） -->
        <section class="col-lg-6">
          <div class="card p-4 rounded-4 shadow-lg border-0 order-main-card">
            <h2 class="order-step mb-4">2. 選擇場次</h2>
            <ul class="list-group mb-4 showtime-list" id="showtimeList">
              <li class="list-group-item" data-date="20250801">2025/08/01</li>
              <li class="list-group-item" data-date="20250815">2025/08/15</li>
              <li class="list-group-item" data-date="20250830">2025/08/30</li>
            </ul>
            <h3 class="order-subtitle mb-3">票價資訊</h3>
            <table
              class="table table-bordered text-center ticket-price-table mb-4"
            >
              <tbody>
                <tr>
                  <td class="zone-A">A區</td>
                  <td>1500元</td>
                </tr>
                <tr>
                  <td class="zone-B">B區</td>
                  <td>1500元</td>
                </tr>
                <tr>
                  <td class="zone-C">C區</td>
                  <td>1000元</td>
                </tr>
              </tbody>
            </table>
            <button id="addToCart" class="btn btn-danger px-5">加入訂單</button>
          </div>
        </section>
      </div>

      <!-- 填寫訂購資訊 -->
      <div class="row g-5 mt-5 mt-lg-6 align-items-start">
        <section class="col-lg-4">
          <h2 class="order-step mb-2">填寫訂購資訊</h2>
          <p class="text-secondary small mb-4">請填寫以下資訊以便完成訂購。</p>
        </section>
        <section class="col-lg-8">
          <form id="orderForm" class="order-form">
            <div class="mb-3">
              <label for="name" class="form-label">姓名</label>
              <input
                type="text"
                class="form-control"
                id="name"
                required
                placeholder="請輸入姓名"
              />
            </div>
            <div class="mb-4">
              <label for="email" class="form-label">電子郵件</label>
              <input
                type="email"
                class="form-control"
                id="email"
                required
                placeholder="請輸入電子郵件"
              />
            </div>
            <div class="order-summary mb-4">
              <h4 class="small fw-bold mb-2">訂單明細</h4>
              <div class="table-responsive">
                <table
                  class="table table-sm table-bordered text-center mb-0"
                  id="summaryTable"
                >
                  <thead class="table-light text-dark">
                    <tr>
                      <th>場次</th>
                      <th>座位</th>
                      <th>價格</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- 動態插入 -->
                  </tbody>
                  <tfoot>
                    <tr>
                      <th colspan="2" class="text-end">總價</th>
                      <th id="totalPrice">$ 0</th>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="d-flex gap-3">
              <button
                type="button"
                class="btn btn-outline-light flex-grow-1"
                id="resetForm"
              >
                取消
              </button>
              <button type="submit" class="btn btn-danger flex-grow-1">
                確認訂單
              </button>
            </div>
          </form>
        </section>
      </div>
    </main>

    <!-- ===== Footer ===== -->
    <footer>
      <div class="footer-main">
        <div class="row g-3 align-items-start">
          <div class="col-12 col-md-3 footer-logo mb-3 mb-md-0">
            <span class="fw-bold" style="font-size: 1.13rem">© 2025 TixGo</span>
            <span class="ms-2 text-secondary" style="font-size: 0.97rem"
              >版權所有</span
            >
          </div>
          <div class="col-12 col-md-3">
            <div class="footer-title">客服信箱</div>
            <div class="footer-text">TixGo@gmail.com</div>
            <div class="footer-text">
              週一至五 9:00~12:00, 13:00~18:00<br /><span class="text-secondary"
                >(假日休息)</span
              >
            </div>
          </div>
          <div class="col-12 col-md-3">
            <div class="footer-title">服務專線</div>
            <div class="footer-text">02-00000000</div>
          </div>
          <div class="col-12 col-md-3">
            <div class="footer-title">系統專線</div>
            <div class="footer-text">02-00000000</div>
          </div>
        </div>
      </div>
    </footer>

    <!-- ===== 互動腳本 ===== -->
    <script>
      const seatButtons = document.querySelectorAll(".seat");
      const showtimeItems = document.querySelectorAll(
        ".showtime-list .list-group-item"
      );
      const addToCartBtn = document.getElementById("addToCart");
      const summaryBody = document.querySelector("#summaryTable tbody");
      const totalPriceCell = document.getElementById("totalPrice");
      const resetBtn = document.getElementById("resetForm");
      let selectedSeat = null;
      let selectedShow = null;
      const priceMap = { A: 1500, B: 1500, C: 1000 };

      seatButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          seatButtons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          selectedSeat = btn.dataset.seat;
        });
      });
      showtimeItems.forEach((item) => {
        item.addEventListener("click", () => {
          showtimeItems.forEach((i) => i.classList.remove("active"));
          item.classList.add("active");
          selectedShow = item.dataset.date;
        });
      });

      function updateTotal() {
        let total = 0;
        summaryBody.querySelectorAll("tr").forEach((tr) => {
          total += parseInt(tr.dataset.price, 10);
        });
        totalPriceCell.textContent = `$ ${total}`;
      }

      addToCartBtn.addEventListener("click", () => {
        if (!selectedSeat || !selectedShow) {
          alert("請先選擇場次與座位！");
          return;
        }
        const zone = selectedSeat.charAt(0);
        const price = priceMap[zone] || 0;
        const tr = document.createElement("tr");
        tr.dataset.price = price;
        tr.innerHTML = `<td>${selectedShow.replace(
          /(\d{4})(\d{2})(\d{2})/,
          "$1/$2/$3"
        )}</td><td>${selectedSeat}</td><td>$ ${price}</td>`;
        summaryBody.appendChild(tr);
        updateTotal();
      });

      resetBtn.addEventListener("click", () => {
        document.getElementById("orderForm").reset();
        summaryBody.innerHTML = "";
        updateTotal();
        seatButtons.forEach((b) => b.classList.remove("active"));
        showtimeItems.forEach((i) => i.classList.remove("active"));
        selectedSeat = selectedShow = null;
      });

      document.getElementById("orderForm").addEventListener("submit", (e) => {
        e.preventDefault();
        if (summaryBody.children.length === 0) {
          alert("請先將座位加入訂單！");
          return;
        }
        alert("訂單已送出，感謝您的購買！");
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
